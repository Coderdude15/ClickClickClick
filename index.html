<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClickClickClick</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <audio id="multiplySound" src="ding-36029.mp3" preload="auto"></audio>
  <audio id="bgMusic" src="background-music-413276.mp3" loop preload="auto"></audio>

  <div id="multiplyTimer" style="position: fixed; top: 10px; left: 10px; font-size: 32px; font-weight: bold; padding: 10px 15px; border-radius: 8px; z-index: 1000;">
    Multiply in: calculating...
  </div>

  <h1>Click this button to count:</h1>
  <h1 id="Count" class="Count">0</h1>
  <h1 class="LeaderboardText">Click here to see <a href="Leaderboard.html">Leaderboard</a></h1>

  <div class="Current">
    <h1>Current score: <span id="CurrentScoreCounter">0</span></h1>
  </div>

  <div class="High">
    <h1>High score: <span id="HighScoreCounter">0</span></h1>
  </div>

  <button id="AddBtn" class="AddBtn" onclick="Add()">Add</button><br><br>
  <button id="XBtn" class="XBtn" onclick="X()">Multiply</button>
  <button id="ToggleBtn" class="ToggleBtn" onclick="toggleMusic()">Toggle Music</button>
  <button onclick="goToShop()" class="ShopBtn">ðŸ›’ Open Shop</button>
  <h1 class="LeaderboardText">Click here to see <a href="#" onclick="goToLeaderboard()">Leaderboard</a></h1>

  <script>
  window.addEventListener("load", () => {
    localStorage.setItem("gameScore", "0");
    localStorage.setItem("lastRewardScore", "0");
  });

  function goToShop() {
    localStorage.setItem("navigating", "true");
    window.location.href = "shop.html";
  }

  function goToLeaderboard() {
    localStorage.setItem("navigating", "true");
    window.location.href = "Leaderboard.html";
  }
  </script>

  <h2>Submit your score</h2>
  <input type="text" id="usernameInput" placeholder="Enter username" />
  <button onclick="handleScoreSubmit()">Submit Score</button>
  <p id="submitStatus"></p>

  <script src="Count.js"></script>

  <script>
  function handleScoreSubmit() {
    const usernameInput = document.getElementById('usernameInput');
    const submitStatus = document.getElementById('submitStatus');
    const username = usernameInput.value.trim();

    if (!username) {
      submitStatus.textContent = "Please enter a username.";
      return;
    }

    const score = parseInt(localStorage.getItem("CurrentScore")) || 0;

    db.ref('leaderboard').push({
      username: username,
      score: score,
      timestamp: Date.now()
    }).then(() => {
      submitStatus.textContent = "Score submitted successfully!";
      usernameInput.value = '';
    }).catch((error) => {
      submitStatus.textContent = "Error submitting score: " + error.message;
    });
  }
  </script>

  <!-- Firebase setup -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyC0lC1S6unGubGU6fQcgvd0qnOYz_pGa_Q",
      authDomain: "leaderboard-65f6e.firebaseapp.com",
      databaseURL: "https://leaderboard-65f6e-default-rtdb.firebaseio.com",
      projectId: "leaderboard-65f6e",
      storageBucket: "leaderboard-65f6e.firebasestorage.appspot.com",
      messagingSenderId: "515120673437",
      appId: "1:515120673437:web:63e2df3edc463bdfdd9a74"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    firebase.auth().signInAnonymously().then(() => {
      console.log("Signed in anonymously");
    }).catch((error) => console.error("Auth error:", error));
  </script>
</body>
</html>
